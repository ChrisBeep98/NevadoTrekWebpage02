/**
 * Desktop Reviews GPU Optimization - FIXED VERSION
 * 
 * Optimizes GPU rendering WITHOUT blocking Splide animations.
 * Key: Use GPU hints but DON'T override transform with !important
 */

/* ===== GPU ACCELERATION (Without blocking animations) ===== */

/* Enable GPU compositing on containers */
.tinyflow-slider {
  /* Create stacking context for GPU */
  transform: translateZ(0);
  will-change: transform;
}

.tinyflow-slider .splide__track {
  /* Force GPU layer without blocking Splide transforms */
  will-change: transform;
  backface-visibility: hidden;
  /* DO NOT use transform: !important here - it blocks Splide! */
}

.tinyflow-slider .splide__list {
  /* Critical: will-change hints GPU but doesn't block animation */
  will-change: transform;
  backface-visibility: hidden;
  
  /* Smooth easing - let Splide control the transform */
  transition-timing-function: linear;
  
  /* GPU optimization without blocking movement */
  transform-style: preserve-3d;
}

/* ===== RENDERING OPTIMIZATIONS ===== */

/* Contain layout shifts */
.tinyflow-slider .splide__slide {
  contain: layout style paint;
}

/* Optimize cards */
.tinyflow-slider .card {
  contain: layout style;
  /* Prevent subpixel rendering issues */
  transform: translateZ(0);
}

/* ===== IMAGE OPTIMIZATION ===== */

.tinyflow-slider img {
  /* Better rendering during transforms */
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

/* ===== PERFORMANCE BOOST ===== */

/* Force hardware acceleration on the entire component */
.section-project {
  /* Isolate stacking context */
  isolation: isolate;
  background-color: #e9efff; /* Matches hardcoded value in main CSS */
}

/* ===== CARD DESIGN REFINEMENTS ===== */

.tinyflow-slider .card {
  contain: layout style;
  /* Prevent subpixel rendering issues */
  transform: translateZ(0);
  
  /* Fixed height for visual consistency */
  height: 280px; 
  min-height: 280px;
  max-height: 280px;
  
  display: flex !important;
  flex-direction: column;
  justify-content: flex-start;
  overflow: hidden;
  
  /* Use existing design tokens where possible */
  background-color: rgba(255, 255, 255, 0.7) !important;
  border-radius: 8px !important;
  border: 1px solid rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.tinyflow-slider .card:hover {
  transform: translateY(-5px) translateZ(0);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1) !important;
}

.tinyflow-slider .card-text {
  /* Line clamping for "incomplete" look fix */
  display: -webkit-box !important;
  -webkit-line-clamp: 4;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  
  margin-top: 10px;
  line-height: 1.5 !important;
  /* Use existing color if variable not found, otherwise fallback */
  color: #333 !important; 
}

.tinyflow-slider .card-header {
  margin-bottom: 5px;
  flex-shrink: 0;
}

.tinyflow-slider .card-divider {
  height: 1px;
  background-color: rgba(0, 0, 0, 0.05);
  margin: 10px 0;
  flex-shrink: 0;
}

.project-sliders-wrapper {
  /* Create GPU layer for sliders wrapper */
  transform: translateZ(0);
  will-change: transform;
}

/* ===== ACCESSIBILITY ===== */

/* Respect user motion preferences */
@media (prefers-reduced-motion: reduce) {
  .tinyflow-slider .splide__list {
    animation: none;
    transition: none;
  }
}

/* ===== BROWSER COMPATIBILITY ===== */

/* Safari optimization */
@supports (-webkit-overflow-scrolling: touch) {
  .tinyflow-slider .splide__list {
    -webkit-transform: translateZ(0);
    -webkit-backface-visibility: hidden;
  }
}

/* ===== KEY CHANGE FROM PREVIOUS VERSION ===== */
/*
 * BEFORE (BROKEN - blocked animations):
 * transform: translateZ(0) !important;  ❌ Prevented Splide from animating
 * 
 * NOW (WORKS - allows animations):
 * will-change: transform;  ✅ Hints GPU without blocking
 * No !important on transform  ✅ Splide can animate freely
 * 
 * Result: GPU-optimized AND animated!
 */
